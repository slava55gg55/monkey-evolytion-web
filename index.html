<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Evolution Slider Quiz</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    color: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: start;
    height: 100vh;
    overflow: hidden;
  }

  .slider-wrapper {
    margin-top: 150px;
    position: relative;
    width: 100%;
    max-width: 600px;
    height: 360px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.4s ease, opacity 0.4s ease;
  }

  .slider-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 12px;
  }

  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 32px;
    cursor: pointer;
    padding: 10px;
    user-select: none;
    background: rgba(255,255,255,0.6);
    border-radius: 50%;
  }

  .arrow.left { left: -40px; }
  .arrow.right { right: -40px; }

  .bottom-panel {
    position: absolute;
    bottom: 0;
    width: 100%;
    max-width: 600px;
    background: #ffffff;
    border-radius: 16px 16px 0 0;
    padding: 20px;
    box-shadow: 0 -4px 16px rgba(0,0,0,0.15);
    transform: translateY(100%);
    transition: transform 0.4s ease;
    max-height: 35%;
    overflow-y: auto;
  }

  .bottom-panel.active {
    transform: translateY(0);
  }

  .open-panel-btn {
    margin-top: 16px;
    padding: 10px 16px;
    background: #222;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }

  .question-block {
    margin-bottom: 16px;
  }

  .answers button {
    display: block;
    width: 100%;
    margin: 8px 0;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    cursor: pointer;
    background: #fafafa;
    text-align: left;
  }

  .answers button:disabled {
    cursor: not-allowed;
    opacity: 0.6;
  }

  .explanation {
    margin-top: 6px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="slider-wrapper" id="sliderWrapper">
  <span class="arrow left" id="prevBtn">❮</span>
  <img id="sliderImg" class="slider-img" src="image1.jpg" />
  <span class="arrow right" id="nextBtn">❯</span>
</div>

<button class="open-panel-btn" id="openPanel">Открыть вопросы</button>

<div class="bottom-panel" id="panel">
  <div id="questionsContainer"></div>
</div>

<script>
  const quizSlides = [
    {
      image: "image1.jpg",
      questions: [
        { question: "Вопрос 1 для картинки 1", answers: ["A1", "B1", "C1"], correct: 0, explanation: "Пояснение 1" },
        { question: "Вопрос 2 для картинки 1", answers: ["A2", "B2", "C2"], correct: 1, explanation: "Пояснение 2" },
        { question: "Вопрос 3 для картинки 1", answers: ["A3", "B3", "C3"], correct: 2, explanation: "Пояснение 3" }
      ]
    },
    {
      image: "image2.jpg",
      questions: [
        { question: "Вопрос 1 для картинки 2", answers: ["A1", "B1", "C1"], correct: 1, explanation: "Пояснение 1" },
        { question: "Вопрос 2 для картинки 2", answers: ["A2", "B2", "C2"], correct: 0, explanation: "Пояснение 2" },
        { question: "Вопрос 3 для картинки 2", answers: ["A3", "B3", "C3"], correct: 2, explanation: "Пояснение 3" }
      ]
    },
    {
      image: "image3.jpg",
      questions: [
        { question: "Вопрос 1 для картинки 3", answers: ["A1", "B1", "C1"], correct: 2, explanation: "Пояснение 1" },
        { question: "Вопрос 2 для картинки 3", answers: ["A2", "B2", "C2"], correct: 0, explanation: "Пояснение 2" },
        { question: "Вопрос 3 для картинки 3", answers: ["A3", "B3", "C3"], correct: 1, explanation: "Пояснение 3" }
      ]
    }
  ];

  let index = 0;
  const sliderImg = document.getElementById("sliderImg");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const sliderWrapper = document.getElementById("sliderWrapper");
  const panel = document.getElementById("panel");
  const openPanel = document.getElementById("openPanel");
  const questionsContainer = document.getElementById("questionsContainer");

  function updateSlide() {
    sliderImg.src = quizSlides[index].image;
    loadQuestions(index);
  }

  prevBtn.onclick = () => { index = (index - 1 + quizSlides.length) % quizSlides.length; updateSlide(); };
  nextBtn.onclick = () => { index = (index + 1) % quizSlides.length; updateSlide(); };

  openPanel.onclick = () => {
    panel.classList.toggle("active");
    sliderWrapper.style.transform = panel.classList.contains("active") ? "translateY(-40px)" : "translateY(0)";
    sliderWrapper.style.opacity = panel.classList.contains("active") ? 0.6 : 1;
    loadQuestions(index);
  };

  function loadQuestions(slideIndex) {
    questionsContainer.innerHTML = "";
    quizSlides[slideIndex].questions.forEach(q => {
      const block = document.createElement("div");
      block.className = "question-block";

      const questionText = document.createElement("div");
      questionText.textContent = q.question;
      block.appendChild(questionText);

      const answersDiv = document.createElement("div");
      answersDiv.className = "answers";

      q.answers.forEach((ans, ai) => {
        const btn = document.createElement("button");
        btn.textContent = ans;
        btn.onclick = () => {
          Array.from(answersDiv.children).forEach(b => b.disabled = true);
          if (ai === q.correct) btn.style.backgroundColor = "#8BC34A";
          else btn.style.backgroundColor = "#F44336";

          const exp = document.createElement("div");
          exp.className = "explanation";
          exp.textContent = q.explanation;
          answersDiv.appendChild(exp);
        };
        answersDiv.appendChild(btn);
      });

      block.appendChild(answersDiv);
      questionsContainer.appendChild(block);
    });
  }

  updateSlide();
</script>

</body>
</html>